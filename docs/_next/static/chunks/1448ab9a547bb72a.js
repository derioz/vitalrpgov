(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58609,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(32341);e.i(36180);var l=e.i(98925),d=e.i(59141),r=e.i(11152),n=e.i(22016);function i(){let{user:e,loading:i}=(0,a.useAuth)(),[o,c]=(0,s.useState)([]),[x,m]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{if(!e)return void m(!1);let t=(0,l.query)((0,l.collection)(d.db,"complaints"),(0,l.where)("authorId","==",e.uid),(0,l.orderBy)("createdAt","desc")),s=(0,l.onSnapshot)(t,e=>{c(e.docs.map(e=>({id:e.id,...e.data()}))),m(!1)},e=>{console.error("Error fetching my complaints:",e),m(!1)});return()=>s()},[e]),i||x)?(0,t.jsx)("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 flex items-center justify-center",children:"Loading..."}):e?(0,t.jsx)("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 pt-24 pb-12 px-6",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-4xl",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[(0,t.jsx)(r.FaInbox,{className:"text-blue-500"})," My Complaints"]}),(0,t.jsx)("p",{className:"text-slate-500 mt-2",children:"Track the status of your reports filed with Internal Affairs."})]})}),(0,t.jsx)("div",{className:"space-y-4",children:0===o.length?(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-dashed border-slate-300 dark:border-slate-800 p-12 text-center",children:[(0,t.jsx)(r.FaShieldAlt,{className:"mx-auto text-4xl text-slate-300 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300",children:"No Complaints Found"}),(0,t.jsx)("p",{className:"text-slate-500",children:"You haven't filed any complaints yet."})]}):o.map(e=>(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-800 hover:shadow-md transition-shadow relative overflow-hidden",children:[!1===e.isReadByUser&&(0,t.jsx)("div",{className:"absolute top-0 right-0 w-3 h-3 bg-red-500 m-4 rounded-full animate-pulse shadow-lg shadow-red-500/50"}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:`px-3 py-1 rounded-lg text-xs font-bold uppercase tracking-wider ${"LSPD"===e.department?"bg-blue-100 text-blue-700":"LSEMS"===e.department?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"}`,children:e.department}),(0,t.jsx)("span",{className:"text-xs text-slate-400 font-mono",children:e.createdAt?.seconds?new Date(1e3*e.createdAt.seconds).toLocaleDateString():"Just now"})]}),(0,t.jsx)("div",{className:`px-3 py-1 rounded-full text-xs font-bold self-start md:self-auto ${"Resolved"===e.status?"bg-green-100 text-green-700":"Dismissed"===e.status?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:e.status})]}),(0,t.jsx)("p",{className:"text-slate-700 dark:text-slate-300 mb-6 line-clamp-2 md:line-clamp-none",children:e.details}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-500 font-bold group cursor-pointer hover:underline",onClick:()=>{},children:[(0,t.jsx)(r.FaComments,{}),e.messages?.length||0," Messages / Responses",(0,t.jsx)("span",{className:"text-slate-400 text-xs font-normal no-underline ml-2",children:"(Clicking details not implemented yet, check status tag)"})]})]},e.id))})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 flex items-center justify-center p-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Please Log In"}),(0,t.jsx)("p",{className:"mb-6",children:"You need to be logged in to view your filed complaints."}),(0,t.jsx)(n.default,{href:"/login",className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold",children:"Login"})]})})}e.s(["default",()=>i])}]);