(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83736,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(32341);e.i(36180);var l=e.i(98925),r=e.i(59141);e.i(61086);var o=e.i(27215),i=e.i(11152);function d(){let{user:e,userProfile:d,refreshProfile:n}=(0,s.useAuth)(),[c,u]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[f,v]=(0,a.useState)(!1),[j,N]=(0,a.useState)(""),[y,k]=(0,a.useState)(!1),[w,C]=(0,a.useState)(!1),S=(0,a.useRef)(null);(0,a.useEffect)(()=>{d&&(u(d.icName||""),b(d.icPhone||""),p(d.discordId||""),g(d.bio||""))},[d]);let F=async t=>{if(!t.target.files||!t.target.files[0]||!e)return;let a=t.target.files[0];C(!0),N("");try{let t=(0,o.ref)(r.storage,`profiles/${e.uid}/avatar.jpg`);await (0,o.uploadBytes)(t,a);let s=await (0,o.getDownloadURL)(t);await (0,l.setDoc)((0,l.doc)(r.db,"users",e.uid),{photoURL:s},{merge:!0}),await n(),N("Profile photo updated!")}catch(e){console.error(e),N("Error uploading image.")}finally{C(!1)}},I=async t=>{if(t.preventDefault(),e){v(!0),N("");try{await (0,l.setDoc)((0,l.doc)(r.db,"users",e.uid),{icName:c,icPhone:x,discordId:m,bio:h,email:e.email},{merge:!0}),await n(),N("Profile updated successfully!")}catch(e){console.error(e),N("Error updating profile.")}finally{v(!1)}}};return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold mb-8 flex items-center gap-3",children:[(0,t.jsx)(i.FaUser,{className:"text-blue-600"})," My Identity"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,t.jsx)("div",{className:"md:col-span-1 space-y-6",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg text-center relative overflow-hidden group",children:[(0,t.jsxs)("div",{className:"w-40 h-40 mx-auto rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden relative border-4 border-slate-200 dark:border-slate-600 mb-4 shadow-inner",children:[d?.photoURL?(0,t.jsx)("img",{src:d.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):(0,t.jsx)(i.FaUser,{className:"w-full h-full p-8 text-slate-300 dark:text-slate-500"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",onClick:()=>S.current?.click(),children:(0,t.jsx)(i.FaCamera,{className:"text-white text-3xl"})})]}),(0,t.jsx)("input",{type:"file",ref:S,onChange:F,className:"hidden",accept:"image/*"}),(0,t.jsx)("button",{type:"button",onClick:()=>S.current?.click(),disabled:w,className:"text-sm font-bold text-blue-500 hover:text-blue-400",children:w?"Uploading...":"Change Photo"}),(0,t.jsx)("h2",{className:"text-xl font-bold mt-4 break-words",children:c||"Anonymous Citizen"}),(0,t.jsx)("p",{className:"text-slate-500 text-sm",children:e?.email})]})}),(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsx)("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg",children:(0,t.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl flex items-start gap-3 text-sm text-blue-800 dark:text-blue-200",children:[(0,t.jsx)(i.FaInfoCircle,{className:"mt-1 shrink-0"}),(0,t.jsx)("p",{children:"This information is used for In-Character identification on portals and rosters. It is visible to government officials."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"IC Name"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i.FaIdCard,{className:"absolute top-3.5 left-3 text-slate-400"}),(0,t.jsx)("input",{type:"text",required:!0,value:c,onChange:e=>u(e.target.value),className:"w-full pl-10 p-3 rounded-lg bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Firstname Lastname"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"IC Phone"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i.FaPhone,{className:"absolute top-3.5 left-3 text-slate-400"}),(0,t.jsx)("input",{type:"text",value:x,onChange:e=>b(e.target.value),className:"w-full pl-10 p-3 rounded-lg bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 outline-none focus:ring-2 focus:ring-blue-500",placeholder:"555-0123"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Discord ID"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i.FaDiscord,{className:"absolute top-3.5 left-3 text-slate-400"}),(0,t.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),className:"w-full pl-10 p-3 rounded-lg bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 outline-none focus:ring-2 focus:ring-blue-500",placeholder:"username#1234"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Linked Email (Private)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",disabled:!0,value:e?.email||"",className:`w-full p-3 rounded-lg bg-slate-100 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 opacity-70 ${!y?"blur-[2px]":""}`}),(0,t.jsx)("button",{type:"button",onClick:()=>k(!y),className:"absolute right-3 top-3 text-slate-400 hover:text-blue-500",children:y?(0,t.jsx)(i.FaEyeSlash,{}):(0,t.jsx)(i.FaEye,{})})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Bio / About Me"}),(0,t.jsx)("textarea",{value:h,onChange:e=>g(e.target.value),className:"w-full p-4 rounded-lg bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 outline-none focus:ring-2 focus:ring-blue-500 h-32 resize-none",placeholder:"Brief character background..."})]}),j&&(0,t.jsx)("div",{className:`p-4 rounded-lg text-sm font-bold ${j.includes("Error")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:j}),(0,t.jsx)("div",{className:"pt-4 flex justify-end",children:(0,t.jsxs)("button",{type:"submit",disabled:f,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-xl flex items-center gap-2 transition-all shadow-lg shadow-blue-600/20",children:[(0,t.jsx)(i.FaSave,{})," ",f?"Saving...":"Save Profile"]})}),(0,t.jsx)("div",{className:"pt-8 text-center border-t border-slate-200 dark:border-slate-700 mt-8",children:(0,t.jsx)("button",{type:"button",onClick:async()=>{!e||confirm("SECURITY WARNING: Grant yourself full System Admin privileges?")&&(await (0,l.setDoc)((0,l.doc)(r.db,"users",e.uid),{roles:["admin"]},{merge:!0}),await n(),alert("Admin Role Granted. Welcome, Commander."))},className:"text-xs text-slate-400 hover:text-red-500 font-mono tracking-widest uppercase opacity-50 hover:opacity-100 transition-all",children:"[DEV: Grant Admin Override]"})})]})})})]})]})}e.s(["default",()=>d])}]);