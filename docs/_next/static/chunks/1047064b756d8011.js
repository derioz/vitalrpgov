(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66317,e=>{"use strict";var t=e.i(59141);e.i(36180);var a=e.i(98925);let r=async e=>{let r=(0,a.query)((0,a.collection)(t.db,e),(0,a.orderBy)("createdAt","desc"));return(await (0,a.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()}))},l=async(e,r)=>{let l=(0,a.doc)(t.db,e,r),i=await (0,a.getDoc)(l);return i.exists()?{id:i.id,...i.data()}:null},i=async(e,r)=>await (0,a.addDoc)((0,a.collection)(t.db,e),{...r,createdAt:a.Timestamp.now()}),s=async(e,r)=>{await (0,a.deleteDoc)((0,a.doc)(t.db,e,r))},d=async(e,r,l)=>{await (0,a.updateDoc)((0,a.doc)(t.db,e,r),l)};e.s(["addDocument",0,i,"deleteDocument",0,s,"getAllDocuments",0,r,"getDocument",0,l,"updateDocument",0,d])},17949,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(66317),l=e.i(18566),i=e.i(59141);e.i(61086);var s=e.i(27215);function d({onUpload:e}){let[r,l]=(0,a.useState)(!1),[d,n]=(0,a.useState)(""),o=async t=>{let a=t.target.files?.[0];if(a){l(!0);try{let t=(0,s.ref)(i.storage,`uploads/${Date.now()}_${a.name}`);await (0,s.uploadBytes)(t,a);let r=await (0,s.getDownloadURL)(t);n(r),e(r)}catch(e){console.error("Upload failed",e),alert("Upload failed")}finally{l(!1)}}};return(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",opacity:.8},children:"Attachment / Image"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:o,disabled:r}),r&&(0,t.jsx)("span",{style:{marginLeft:"1rem"},children:"Uploading..."}),d&&(0,t.jsx)("img",{src:d,alt:"Uploaded",style:{marginTop:"1rem",maxHeight:"200px",display:"block",borderRadius:"4px"}})]})}function n(){let[e,i]=(0,a.useState)(""),[s,n]=(0,a.useState)(""),[o,c]=(0,a.useState)("order"),[u,m]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[p,x]=(0,a.useState)(""),[y,j]=(0,a.useState)(!1),v=(0,l.useRouter)(),b=async t=>{t.preventDefault(),j(!0);try{await (0,r.addDocument)("records",{title:e,date:s,type:o,summary:u,content:h,imageUrl:p}),v.push("/admin/records")}catch(e){console.error(e),alert("Error creating record")}finally{j(!1)}};return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Create Public Record"}),(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("form",{onSubmit:b,children:[(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{children:"Title"}),(0,t.jsx)("input",{value:e,onChange:e=>i(e.target.value),required:!0})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{children:"Date"}),(0,t.jsx)("input",{type:"date",value:s,onChange:e=>n(e.target.value),required:!0})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{children:"Type"}),(0,t.jsxs)("select",{value:o,onChange:e=>c(e.target.value),children:[(0,t.jsx)("option",{value:"order",children:"Executive Order"}),(0,t.jsx)("option",{value:"press",children:"Press Release"})]})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{children:"Summary (Short description)"}),(0,t.jsx)("input",{value:u,onChange:e=>m(e.target.value),required:!0})]}),(0,t.jsx)(d,{onUpload:x}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{children:"Content"}),(0,t.jsx)("textarea",{value:h,onChange:e=>g(e.target.value),required:!0,rows:10})]}),(0,t.jsx)("button",{type:"submit",className:"btn",disabled:y,children:y?"Publishing...":"Publish Record"})]})})]})}e.s(["default",()=>n],17949)}]);