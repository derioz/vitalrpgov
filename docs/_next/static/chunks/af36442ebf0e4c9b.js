(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48268,e=>{"use strict";var l=e.i(43476),t=e.i(71645);e.i(36180);var s=e.i(98925),a=e.i(59141),r=e.i(11152);function i(){let[e,i]=(0,t.useState)([]),[o,d]=(0,t.useState)(!0),[c,n]=(0,t.useState)(""),x=async()=>{try{let e=(await (0,s.getDocs)((0,s.collection)(a.db,"users"))).docs.map(e=>({id:e.id,...e.data()}));i(e)}catch(e){console.error("Error fetching users:",e)}finally{d(!1)}};(0,t.useEffect)(()=>{x()},[]);let u=async(l,t,r=[])=>{let o=(0,s.doc)(a.db,"users",l),d=[...r];d.includes(t)?d=d.filter(e=>e!==t):d.push(t);try{await (0,s.updateDoc)(o,{roles:d}),i(e.map(e=>e.id===l?{...e,roles:d}:e))}catch(e){console.error("Error updating role:",e),alert("Failed to update role")}},m=e.filter(e=>e.email?.toLowerCase().includes(c.toLowerCase())||e.icName?.toLowerCase().includes(c.toLowerCase())),h=[{id:"admin",label:"Admin",color:"indigo",icon:r.FaUserShield},{id:"lspd",label:"LSPD",color:"blue",icon:r.FaShieldAlt},{id:"ems",label:"LSEMS",color:"red",icon:r.FaIdBadge},{id:"safd",label:"SAFD",color:"orange",icon:r.FaIdBadge},{id:"doj",label:"DOJ",color:"amber",icon:r.FaUserTag}];return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-slate-900/40 backdrop-blur-xl border border-white/5 p-6 rounded-3xl",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{className:"text-3xl font-black text-white flex items-center gap-3",children:[(0,l.jsx)(r.FaUserShield,{className:"text-indigo-500"}),"User Management"]}),(0,l.jsx)("p",{className:"text-slate-400 mt-1",children:"Manage registered users and assign faction roles."})]}),(0,l.jsxs)("div",{className:"relative w-full md:w-96",children:[(0,l.jsx)(r.FaSearch,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"}),(0,l.jsx)("input",{type:"text",placeholder:"Search by email or IC name...",value:c,onChange:e=>n(e.target.value),className:"w-full bg-slate-950 border border-slate-700 text-white rounded-xl py-3 pl-12 pr-4 focus:ring-2 focus:ring-indigo-500 outline-none placeholder:text-slate-600 font-medium"})]})]}),(0,l.jsx)("div",{className:"grid gap-4",children:o?(0,l.jsx)("div",{className:"text-center py-20 text-slate-500 animate-pulse",children:"Loading users..."}):m.length>0?m.map(e=>(0,l.jsxs)("div",{className:"bg-slate-900/40 backdrop-blur-md border border-white/5 p-6 rounded-2xl flex flex-col lg:flex-row items-center justify-between gap-6 hover:bg-slate-800/40 transition-colors group",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 w-full lg:w-1/3",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center text-xl font-bold text-slate-400 border border-white/5 uppercase",children:e.icName?e.icName.charAt(0):e.email?.charAt(0)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-white leading-tight",children:e.icName||(0,l.jsx)("span",{className:"text-slate-500 italic",children:"No IC Name Set"})}),(0,l.jsx)("p",{className:"text-slate-500 text-sm font-mono",children:e.email})]})]}),(0,l.jsx)("div",{className:"flex flex-wrap justify-center gap-2 flex-1",children:h.map(t=>{let s=e.roles?.includes(t.id);return(0,l.jsxs)("button",{onClick:()=>u(e.id,t.id,e.roles),className:`
                                                flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-bold transition-all border
                                                ${s?`bg-${t.color}-500/20 border-${t.color}-500/50 text-${t.color}-300 shadow-[0_0_15px_rgba(0,0,0,0.2)]`:"bg-slate-950/50 border-slate-800 text-slate-600 hover:border-slate-600 hover:text-slate-400"}
                                            `,children:[(0,l.jsx)(t.icon,{}),t.label,s?(0,l.jsx)(r.FaCheckCircle,{size:12}):null]},t.id)})})]},e.id)):(0,l.jsxs)("div",{className:"text-center py-20 text-slate-500 bg-slate-900/20 rounded-3xl border border-dashed border-slate-800",children:['No users found matching "',c,'"']})})]})}e.s(["default",()=>i])}]);