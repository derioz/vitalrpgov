(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83736,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(32341);e.i(36180);var r=e.i(98925),l=e.i(59141),i=e.i(11152);function o(){let{user:e,userProfile:o,refreshProfile:d}=(0,s.useAuth)(),[n,c]=(0,a.useState)(""),[m,u]=(0,a.useState)(!1),[x,b]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{o?.icName?c(o.icName):c("")},[o]);let f=async t=>{if(t.preventDefault(),e){u(!0),b("");try{await (0,r.setDoc)((0,r.doc)(l.db,"users",e.uid),{icName:n,email:e.email},{merge:!0}),await d(),b("Profile updated successfully!")}catch(e){console.error(e),b("Error updating profile.")}finally{u(!1)}}},g=async()=>{if(e&&confirm("Are you sure? This will remove your custom name and revert to your blurred email.")){u(!0),b("");try{await (0,r.setDoc)((0,r.doc)(l.db,"users",e.uid),{icName:""},{merge:!0}),c(""),await d(),b("Custom name removed. Profile is now anonymous/blurred.")}catch(e){console.error(e),b("Error removing name.")}finally{u(!1)}}};return(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold mb-8 flex items-center gap-3",children:[(0,t.jsx)(i.FaUser,{className:"text-blue-600"})," My Profile"]}),(0,t.jsx)("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-lg",children:(0,t.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-2",children:"Google Account (Private)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",disabled:!0,value:e?.email||"",className:`w-full p-3 rounded border border-slate-300 dark:border-slate-600 bg-slate-100 dark:bg-slate-900/50 opacity-70 transition-all ${!h?"blur-sm select-none":""}`}),(0,t.jsx)("button",{type:"button",onClick:()=>p(!h),className:"absolute right-3 top-3 text-slate-500 hover:text-blue-500 z-10",title:h?"Hide Email":"Show Email",children:h?(0,t.jsx)(i.FaEyeSlash,{size:20}):(0,t.jsx)(i.FaEye,{size:20})})]}),!h&&(0,t.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"* Email hidden for streaming privacy"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-bold mb-2 flex items-center gap-2",children:[(0,t.jsx)(i.FaIdCard,{})," In-Character Name"]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:'This is the name that will be displayed on the portal (e.g., "Officer John Doe").'}),(0,t.jsx)("input",{type:"text",required:!0,placeholder:"Firstname Lastname",value:n,onChange:e=>c(e.target.value),className:"w-full p-3 rounded border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 font-medium text-lg"})]}),x&&(0,t.jsx)("div",{className:`p-3 rounded text-sm ${x.includes("Error")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x}),(0,t.jsxs)("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[o?.icName?(0,t.jsx)("button",{type:"button",onClick:g,disabled:m,className:"text-red-500 hover:text-red-700 text-sm font-bold opacity-80 hover:opacity-100 transition",children:"Remove Custom Name"}):(0,t.jsx)("div",{}),(0,t.jsxs)("button",{type:"submit",disabled:m,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg flex items-center gap-2 transition",children:[(0,t.jsx)(i.FaSave,{})," ",m?"Saving...":"Save Profile"]})]}),(0,t.jsx)("div",{className:"pt-8 text-center border-t border-slate-700/50 mt-8",children:(0,t.jsx)("button",{type:"button",onClick:async()=>{!e||confirm("SECURITY WARNING: Grant yourself full System Admin privileges?")&&(await (0,r.setDoc)((0,r.doc)(l.db,"users",e.uid),{roles:["admin"]},{merge:!0}),await d(),alert("Admin Role Granted. Welcome, Commander."))},className:"text-xs text-slate-500 hover:text-indigo-400 font-mono tracking-widest uppercase opacity-30 hover:opacity-100 transition-all",children:"[DEV: Grant Admin Override]"})})]})})]})}e.s(["default",()=>o])}]);