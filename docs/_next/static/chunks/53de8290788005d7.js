(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66317,e=>{"use strict";var t=e.i(59141);e.i(36180);var a=e.i(98925);let s=async e=>{let s=(0,a.query)((0,a.collection)(t.db,e),(0,a.orderBy)("createdAt","desc"));return(await (0,a.getDocs)(s)).docs.map(e=>({id:e.id,...e.data()}))},r=async(e,s)=>{let r=(0,a.doc)(t.db,e,s),l=await (0,a.getDoc)(r);return l.exists()?{id:l.id,...l.data()}:null},l=async(e,s)=>await (0,a.addDoc)((0,a.collection)(t.db,e),{...s,createdAt:a.Timestamp.now()}),o=async(e,s)=>{await (0,a.deleteDoc)((0,a.doc)(t.db,e,s))};e.s(["addDocument",0,l,"deleteDocument",0,o,"getAllDocuments",0,s,"getDocument",0,r])},17949,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(66317),r=e.i(18566),l=e.i(59141);e.i(61086);var o=e.i(27215);function i({onUpload:e}){let[s,r]=(0,a.useState)(!1),[i,d]=(0,a.useState)(""),n=async t=>{let a=t.target.files?.[0];if(a){r(!0);try{let t=(0,o.ref)(l.storage,`uploads/${Date.now()}_${a.name}`);await (0,o.uploadBytes)(t,a);let s=await (0,o.getDownloadURL)(t);d(s),e(s)}catch(e){console.error("Upload failed",e),alert("Upload failed")}finally{r(!1)}}};return(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",opacity:.8},children:"Attachment / Image"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:n,disabled:s}),s&&(0,t.jsx)("span",{style:{marginLeft:"1rem"},children:"Uploading..."}),i&&(0,t.jsx)("img",{src:i,alt:"Uploaded",style:{marginTop:"1rem",maxHeight:"200px",display:"block",borderRadius:"4px"}})]})}function d(){let[e,l]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[n,c]=(0,a.useState)("order"),[u,x]=(0,a.useState)(""),[m,b]=(0,a.useState)(""),[p,h]=(0,a.useState)(""),[g,f]=(0,a.useState)(!1),y=(0,r.useRouter)(),j=async t=>{t.preventDefault(),f(!0);try{await (0,s.addDocument)("records",{title:e,date:o,type:n,summary:u,content:m,imageUrl:p,createdAt:new Date().toISOString()}),y.push("/admin/records")}catch(e){console.error(e),alert("Error creating record")}finally{f(!1)}};return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-black text-white tracking-tight",children:"Create Public Record"}),(0,t.jsx)("p",{className:"text-slate-400 mt-2",children:"Publish a new executive order or press release."})]})}),(0,t.jsx)("div",{className:"bg-slate-900/50 backdrop-blur-md border border-slate-800 rounded-2xl p-8",children:(0,t.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Title"}),(0,t.jsx)("input",{value:e,onChange:e=>l(e.target.value),required:!0,className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-amber-500 transition-colors"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Date"}),(0,t.jsx)("input",{type:"date",value:o,onChange:e=>d(e.target.value),required:!0,className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-amber-500 transition-colors"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Record Type"}),(0,t.jsxs)("select",{value:n,onChange:e=>c(e.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-amber-500 transition-colors appearance-none",children:[(0,t.jsx)("option",{value:"order",children:"Executive Order"}),(0,t.jsx)("option",{value:"press",children:"Press Release"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Summary"}),(0,t.jsx)("input",{value:u,onChange:e=>x(e.target.value),required:!0,className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-amber-500 transition-colors",placeholder:"Brief description for list view..."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Attachment / Image"}),(0,t.jsx)(i,{onUpload:h})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Content"}),(0,t.jsx)("textarea",{value:m,onChange:e=>b(e.target.value),required:!0,rows:10,className:"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-amber-500 transition-colors resize-none font-mono text-sm"})]}),(0,t.jsx)("div",{className:"pt-4 border-t border-slate-800 flex justify-end",children:(0,t.jsx)("button",{type:"submit",disabled:g,className:"px-8 py-3 bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-500 hover:to-amber-400 text-white font-bold rounded-xl shadow-lg shadow-amber-900/20 transition-all transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Publishing...":"Publish Record"})})]})})]})}e.s(["default",()=>d],17949)}]);