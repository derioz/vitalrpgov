(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48268,e=>{"use strict";var s=e.i(43476),l=e.i(71645);e.i(36180);var t=e.i(98925),a=e.i(59141),r=e.i(32341),i=e.i(11152);function d(){let{userProfile:e}=(0,r.useAuth)(),[d,o]=(0,l.useState)([]),[c,n]=(0,l.useState)(!0),[x,u]=(0,l.useState)(""),p=e?.roles?.includes("superadmin"),m=async()=>{try{let e=(await (0,t.getDocs)((0,t.collection)(a.db,"users"))).docs.map(e=>({id:e.id,...e.data()}));o(e)}catch(e){console.error("Error fetching users:",e)}finally{n(!1)}};(0,l.useEffect)(()=>{p?m():e&&n(!1)},[p,e]);let h=async(e,s,l=[])=>{let r=(0,t.doc)(a.db,"users",e),i=[...l||[]];i.includes(s)?i=i.filter(e=>e!==s):i.push(s);try{await (0,t.updateDoc)(r,{roles:i}),o(d.map(s=>s.id===e?{...s,roles:i}:s))}catch(e){console.error("Error updating role:",e),alert("Failed to update role")}},b=d.filter(e=>e.email?.toLowerCase().includes(x.toLowerCase())||e.icName?.toLowerCase().includes(x.toLowerCase())),g=[{id:"superadmin",label:"Superadmin",color:"pink",icon:i.FaCrown},{id:"admin",label:"Dept. Leader",color:"indigo",icon:i.FaUserShield},{id:"lspd",label:"LSPD",color:"blue",icon:i.FaShieldAlt},{id:"ems",label:"LSEMS",color:"red",icon:i.FaIdBadge},{id:"safd",label:"SAFD",color:"orange",icon:i.FaIdBadge},{id:"doj",label:"DOJ",color:"amber",icon:i.FaUserTag}];return p||c?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-slate-900/40 backdrop-blur-xl border border-white/5 p-6 rounded-3xl",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-black text-white flex items-center gap-3",children:[(0,s.jsx)(i.FaUserShield,{className:"text-indigo-500"}),"User Management"]}),(0,s.jsxs)("p",{className:"text-slate-400 mt-1",children:["Manage registered users and assign faction roles. ",(0,s.jsx)("span",{className:"text-pink-500 font-bold ml-2 text-xs uppercase tracking-wider",children:"Superadmin Only"})]})]}),(0,s.jsxs)("div",{className:"relative w-full md:w-96",children:[(0,s.jsx)(i.FaSearch,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by email or IC name...",value:x,onChange:e=>u(e.target.value),className:"w-full bg-slate-950 border border-slate-700 text-white rounded-xl py-3 pl-12 pr-4 focus:ring-2 focus:ring-indigo-500 outline-none placeholder:text-slate-600 font-medium"})]})]}),(0,s.jsx)("div",{className:"grid gap-4",children:c?(0,s.jsx)("div",{className:"text-center py-20 text-slate-500 animate-pulse",children:"Loading users..."}):b.length>0?b.map(e=>(0,s.jsxs)("div",{className:"bg-slate-900/40 backdrop-blur-md border border-white/5 p-6 rounded-2xl flex flex-col lg:flex-row items-center justify-between gap-6 hover:bg-slate-800/40 transition-colors group",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 w-full lg:w-1/3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center text-xl font-bold text-slate-400 border border-white/5 uppercase",children:e.icName?e.icName.charAt(0):e.email?.charAt(0)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-white leading-tight",children:e.icName||(0,s.jsx)("span",{className:"text-slate-500 italic",children:"No IC Name Set"})}),(0,s.jsx)("p",{className:"text-slate-500 text-sm font-mono",children:e.email}),(0,s.jsx)("div",{className:"flex gap-2 mt-2",children:e.roles?.includes("superadmin")&&(0,s.jsx)("span",{className:"text-[10px] bg-pink-500/10 text-pink-400 border border-pink-500/20 px-2 py-0.5 rounded uppercase font-bold tracking-wider",children:"Superadmin"})})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap justify-center gap-2 flex-1",children:g.map(l=>{let t=e.roles?.includes(l.id);return(0,s.jsxs)("button",{onClick:()=>h(e.id,l.id,e.roles),className:`
                                                flex items-center gap-2 px-3 py-2 rounded-lg text-xs font-bold transition-all border uppercase tracking-wide
                                                ${t?`bg-${l.color}-500/20 border-${l.color}-500/50 text-${l.color}-300 shadow-[0_0_15px_rgba(0,0,0,0.2)]`:"bg-slate-950/50 border-slate-800 text-slate-600 hover:border-slate-600 hover:text-slate-400"}
                                            `,children:[(0,s.jsx)(l.icon,{}),l.label,t?(0,s.jsx)(i.FaCheckCircle,{size:12}):null]},l.id)})})]},e.id)):(0,s.jsxs)("div",{className:"text-center py-20 text-slate-500 bg-slate-900/20 rounded-3xl border border-dashed border-slate-800",children:['No users found matching "',x,'"']})})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-[50vh] text-slate-500",children:[(0,s.jsx)(i.FaUserShield,{size:48,className:"mb-4 opacity-50"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-300",children:"Access Denied"}),(0,s.jsx)("p",{children:"You do not have permission to view this page."})]})}e.s(["default",()=>d])}]);